import numpy as np
import ctypes

from scipy import io

indata = io.loadmat("../purdue_1_workspace/init_watershed_all_time_stamps/init_data_f5_small.mat")["vol"].astype("double")
outdata = np.zeros(indata.shape, dtype=np.double)
lib = ctypes.cdll.LoadLibrary('./watershed.so')

fun = lib.cfun
# Here comes the fool part.
fun(ctypes.c_void_p(indata.ctypes.data), ctypes.c_int(5), ctypes.c_int(6), ctypes.c_void_p(outdata.ctypes.data))

print 'indata: %s' % indata
print 'outdata: %s' % outdata
